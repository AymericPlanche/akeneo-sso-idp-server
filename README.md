# Akeneo PIM IDP Server

This docker image is a SSO IDP (identity provider) server.

It contains in memory users, the same that are configured in [icecat fixtures](https://github.com/akeneo/pim-community-dev/blob/master/src/Akeneo/Platform/Bundle/InstallerBundle/Resources/fixtures/icecat_demo_dev/users.csv).


## How to use ?

### Locally

#### Setup the SSO idp server

In your `docker-compose.yml` file, add the following configuration and adapt it:

```
sso-idp-server:
    image: 'akeneo-sso-idp:latest'
    environment:
      SIMPLESAMLPHP_SP_ENTITY_ID: 'http://your-pim-url'
      SIMPLESAMLPHP_SP_ASSERTION_CONSUMER_SERVICE: 'http://your-pim-url/saml/acs'
      SIMPLESAMLPHP_SP_SINGLE_LOGOUT_SERVICE: 'http://your-pim-url/saml/logout'
```

#### Setup the SSO PIM configuration

Go to http://your-pim-url/#/sso-configuration, then activate the SSO (with the toggle button)

Fill the form with the following data:

* Entity id: http://akeneo-idp-server/simplesaml/saml2/idp/metadata.php
* SSO url: http://akeneo-idp-server/simplesaml/saml2/idp/SSOService.php
* SLO url: http://akeneo-idp-server/simplesaml/saml2/idp/SingleLogoutService.php
* IDP public key: MIIDXTCCAkWgAwIBAgIJALmVVuDWu4NYMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNVBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwHhcNMTYxMjMxMTQzNDQ3WhcNNDgwNjI1MTQzNDQ3WjBFMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzUCFozgNb1h1M0jzNRSCjhOBnR+uVbVpaWfXYIR+AhWDdEe5ryY+CgavOg8bfLybyzFdehlYdDRgkedEB/GjG8aJw06l0qF4jDOAw0kEygWCu2mcH7XOxRt+YAH3TVHa/Hu1W3WjzkobqqqLQ8gkKWWM27fOgAZ6GieaJBN6VBSMMcPey3HWLBmc+TYJmv1dbaO2jHhKh8pfKw0W12VM8P1PIO8gv4Phu/uuJYieBWKixBEyy0lHjyixYFCR12xdh4CA47q958ZRGnnDUGFVE1QhgRacJCOZ9bd5t9mr8KLaVBYTCJo5ERE8jymab5dPqe5qKfJsCZiqWglbjUo9twIDAQABo1AwTjAdBgNVHQ4EFgQUxpuwcs/CYQOyui+r1G+3KxBNhxkwHwYDVR0jBBgwFoAUxpuwcs/CYQOyui+r1G+3KxBNhxkwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAAiWUKs/2x/viNCKi3Y6blEuCtAGhzOOZ9EjrvJ8+COH3Rag3tVBWrcBZ3/uhhPq5gy9lqw4OkvEws99/5jFsX1FJ6MKBgqfuy7yh5s1YfM0ANHYczMmYpZeAcQf2CGAaVfwTTfSlzNLsF2lW/ly7yapFzlYSJLGoVE+OHEu8g5SlNACUEfkXw+5Eghh+KzlIN7R6Q7r2ixWNFBC/jWf7NKUfJyX8qIG5md1YUeT6GBW9Bm2/1/RiO24JTaYlfLdKK9TYb8sG5B+OLab2DImG99CJ25RkAcSobWNF5zD0O6lgOo3cEdB/ksCq3hmtlC/DlLZ/D8CJ+7VuZnS1rR2naQ==
* SP public key: MIIDYDCCAkigAwIBAgIJALap6dVB8+8VMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNVBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwHhcNMTgwOTIxMTIwMjA1WhcNMjgwOTIwMTIwMjA1WjBFMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwpLmvVwtzHwHZvENivz0lYsQ3m6gnqrHXdkszonaF253ariYO7TYQlcCv/wDtewB4AQtc1BEklHsFyyaPGUtsDu14lU02DP1Zt2GH4QgCcwP9/4iODoDbRMTatguBMYb0oRUL/Q73fJ168BX81fdpMC46GcZ6gTGDmNGlEAy5vBh0uawsL5vActWfboSIvpJ2sE3NUFXUriwSotrmisnrx9VS5MyYvdjbLQWlFlwpSRcocxu7N99zvDhgh4uzH0z6YR+2zbY8Zt3h+3DN6ocfkFpytvHD1/aF4CvdwZE77BRZKcc6GTHTYr0MCtips0HCIbHJfmO8DQngJaAWu1fLwIDAQABo1MwUTAdBgNVHQ4EFgQUA/D2T/3PnBMcY/TCSvVc7dnPNqswHwYDVR0jBBgwFoAUA/D2T/3PnBMcY/TCSvVc7dnPNqswDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAIithf+spSzTC0AlQuPuCMjCiLzn3HpRP1JvSsE0uL/SB69o1PveArywSGIJYGrORMYkL5LebTIs2mU6Tqe00+NmhvX6wdiotEShdDdgjZC1EKygcnFIF3q1CjfH0WrYMLAvhR2+qEJgLdiedLfmdGknUrM+mA7/AaZ+ZnlTOzhQau9t4ULmrCixQjvDpO/hqb0okaIjQ4XGew9AW/x8v7g0piba3RcBE0vdykDFcoLIzfx1ZS8twH2i+749DNUH3/6HTlEY2ggu6tUE0GCMxozRQ9SbNMd0Bylmo9mva4AfpED+dU4kDG2idxkho/j4kq7fAFLzn7XzKiCphMqeSzQ==
* SP private key: MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDCkua9XC3MfAdm8Q2K/PSVixDebqCeqsdd2SzOidoXbndquJg7tNhCVwK//AO17AHgBC1zUESSUewXLJo8ZS2wO7XiVTTYM/Vm3YYfhCAJzA/3/iI4OgNtExNq2C4ExhvShFQv9Dvd8nXrwFfzV92kwLjoZxnqBMYOY0aUQDLm8GHS5rCwvm8By1Z9uhIi+knawTc1QVdSuLBKi2uaKyevH1VLkzJi92NstBaUWXClJFyhzG7s333O8OGCHi7MfTPphH7bNtjxm3eH7cM3qhx+QWnK28cPX9oXgK93BkTvsFFkpxzoZMdNivQwK2KmzQcIhscl+Y7wNCeAloBa7V8vAgMBAAECggEARfBR2jz5BWiLrJf2+z+jluFO5fUz7PSMBxLaRT9N0mBVslm59rQxi98E0QeAOfMkVWaLA8kVbNbfmxDgO9dOjetYnItuHEzI5/m2jTuL3JmqH8UMfdN0ic9yilQ8bmDbfVctf7M1lbjiZCRWONUbiW3wyTDOIs0md+N9aiqNYW7jhFtWm/1wcLaPVMlCELBHFr/6fo/D5uoo6l5rqTPEq+fdwNC9QlEd0NN/05H3XmMd2SLY9kW131tJw00sP+YhOIqeBluNjdjIojM2bOcV6N/8qu3vB+P3tEwLSPAPT8WCKPcnkW2tt1gpNnJ//+YkxDKuRGdMprW3gYmP/TtWcQKBgQDwmKc9IV5OYgszvMSanBuhCPpMlR69ht5EtGdnrBZy5K+OUwbWm/pH17W4RRrSDibxGQ6LEekBuNSKmIOPZH6TbBH17JVlbQMjzquOddzlNUMbxULiLgf5nGpqkDV7MuMlo+v2UM2I7EmM8H9fZJriA62pf0UyAbMbmAiGXd61dwKBgQDPB/HkZCfoDCP70AZ8lKgWJM1Y5o1bDV8JBoxGh1ZQL2uTR1+/Ys9rm+8zlCf5CL48Oen6Os4Dcr3QljhgbgAHCXwR9/LQu6JPD9Foc4p7byN5y8xy4nZt3Gfw7jZiIYKiFM6/3lV+xKYVGLR+xYDe44j8iak7/i55iNiNg4ZyCQKBgAZ0MdhD8uGrY52JrMRw95TERuKTBXYUDhZNuJBhX2DJnaP1ujM7j+UpdihxQhzsYEMLZwZ3/oYbTShCmxTXn0WZGoo8RG2qFPF688MoijpjyV8PVZH3piMd/QTKxYR+gvVZhlTfKgRIQljTgrcuXbE+ZAQt8885mHJfC6t/DSBVAoGAGrC6hahH4MmX5gHmpC8CEIDEHH70oFVz+BTpBrqx7PqAEuezt1fEx+m9h9fE4302EUuiF4l3P8iOIhMLx5rG1CFr5mEh47kc7rZqV931b35fg3c7r1/0xqsQl2YOis4pKj4mfWPrf8FYbAXYVzOdLp8E7RHOSJa3ZSG4UV4wegkCgYEAjx/fOLGe//NNPdODq2kAjbAJbs0+Kypqd1EdN/CRXIjfIpDIqPVsLISTjF9pbBSc+/J9KqUjMJNKBuTibvA35f2uvVnhPoLQmMGu7n/QRgcY0msGvB9ezrgLrbnRDcQnKNxSyNsDS9Kd+yrl+p08LB2HWsVmCNhGlPXzFoMH/PI=

## To go further

This image is based on **kristophjunge/test-saml-idp** docker image. See https://github.com/kristophjunge/docker-test-saml-idp for further information and configuration.

The theme use the **Partial material design theme** provided by **silinternational**: https://github.com/silinternational/simplesamlphp-module-material